# ğŸ’ˆ Sistema de Agendamento da Barbearia (Web App)

Este documento descreve a nova arquitetura e o roteiro de desenvolvimento do sistema, que evoluiu de um protÃ³tipo em Rust para um aplicativo web moderno, offline-first e de alta performance.

## ğŸ¯ Objetivo Principal

Substituir a agenda de papel por um **aplicativo web funcional que roda em qualquer dispositivo, incluindo iPhones, sem depender de lojas de aplicativos**. O sistema oferece persistÃªncia de dados real no navegador, garantindo que o barbeiro possa trabalhar mesmo sem conexÃ£o com a internet.

## ğŸš€ Arquitetura Central (atual)

O projeto atual usa um frontend moderno em SvelteKit e um backend em Rust (Axum) com banco SQLite.

- Frontend: SvelteKit + TypeScript + Vite. Componentes reutilizÃ¡veis estÃ£o em `frontend/src/lib/components`.
- Backend: Rust + Axum; persistÃªncia em SQLite localizada no diretÃ³rio `beckend/`.
- ComunicaÃ§Ã£o: o frontend expÃµe proxies server-side em `frontend/src/routes/api/*/+server.ts` que encaminham chamadas para o backend usando a variÃ¡vel `PRIVATE_API_BASE`.

### Como rodar (dev)

- Backend:

```powershell
cd C:\rust\Agendou!\beckend
cargo run
```

- Frontend:

```powershell
cd C:\rust\Agendou!\frontend
npm install
npm run dev -- --host
```

### Comportamento relevante documentado

- O frontend faz `load` em `/agendamentos` buscando `/api/agendamentos`, `/api/clientes` e `/api/servicos` e faz lookup local para exibir nomes legÃ­veis na UI.
- Na lista e no cartÃ£o de confirmaÃ§Ã£o o cliente Ã© exibido pelo primeiro nome completo e as demais palavras sÃ£o abreviadas como iniciais (ex.: "JoÃ£o Pedro Silva" â†’ "JoÃ£o P. S.").

### Endpoints Ãºteis (proxies)

- GET /api/availability (proxy) â†’ backend /availability
- GET /api/work_windows, POST /api/work_windows (proxy)
- Clientes/ServiÃ§os/Agendamentos tÃªm proxies em `frontend/src/routes/api/`.

### Notas

- Alguns componentes importantes: `AvailabilityPicker.svelte`, `WheelPicker.svelte`, `Autocomplete.svelte`, `SideSheet.svelte`.
- Remova referÃªncias antigas a Flutter/OPFS; o estado atual do repositÃ³rio Ã© SvelteKit (frontend) + Rust (backend).

Fim.
