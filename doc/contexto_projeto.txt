Resumo técnico do projeto Agendou!

1. Visão geral
O projeto "Agendou!" é um sistema de agendamento para barbearias com backend escrito em Rust (Axum) e frontend em SvelteKit. O backend expõe uma API REST e utiliza SQLite para persistência. O frontend é um SPA em SvelteKit que consome o backend via proxies server-side para evitar expor o endereço real do backend no bundle.

2. Estrutura e mudanças recentes
- Backend (beckend/): Rust + Axum. Arquivos principais em `beckend/src`.
  - `db/mod.rs`: gerencia conexão SQLite, criação de tabelas (incluindo `work_windows`) e contém a função `calcular_disponibilidade` que gera `slots` discretos para uma data dada.
  - `agendamentos.rs`: handlers HTTP para agendamentos, endpoint `availability` (GET /availability) e handlers para `work_windows` (GET/POST).

- Frontend (frontend/): SvelteKit + TypeScript.
  - `src/lib/components/`: contém `AvailabilityPicker.svelte`, `WheelPicker.svelte`, `Autocomplete.svelte`, `SideSheet.svelte`, entre outros.
  - `src/routes/api/*/+server.ts`: proxies server-side que encaminham chamadas para o backend usando `PRIVATE_API_BASE`.
  - `src/routes/+layout.svelte`: app shell com sidebar, SideSheet para mobile, e um controlador de navegação por swipe.

3. Endpoints importantes
- Clientes: GET /clientes, POST /clientes, GET/PUT/DELETE /clientes/:id
- Serviços: GET /servicos, POST /servicos, GET/PUT/DELETE /servicos/:id
- Agendamentos: GET /agendamentos, POST /agendamentos (aceita payloads flexíveis), PUT /agendamentos/:id, DELETE /agendamentos/:id
- Availability: GET /availability?date=YYYY-MM-DD&duracao_min=&buffer_min=&granularity_min= -> retorna { slots: string[] }
- Work windows: GET /work_windows, POST /work_windows

4. Observações técnicas
- O backend aceita `data_hora` tanto como número (timestamp) quanto como string RFC3339 no endpoint de criação de agendamentos (`criar_agendamento_api_incoming`).
- `calcular_disponibilidade` usa as `work_windows` configuradas no banco; se nenhuma `work_window` existir para o dia, usa um intervalo padrão (08:00–18:00) como fallback.
- As proxies server-side do frontend usam a variável de ambiente `PRIVATE_API_BASE` (não exposta ao cliente) para encaminhar as requisições ao backend.

5. Como rodar localmente
- Backend: `cd beckend && cargo run`
- Frontend: `cd frontend && npm install && npm run dev -- --host`

6. Observações práticas
- A documentação de UX e de lógica (em `doc/AGENDAMENTO_UX_GUIDELINES.md` e `doc/logic_agendamento.md`) descreve as decisões de interface e o fluxo de agendamento adotado.
- Remover qualquer fallback de persistência local (localStorage) em `AvailabilityPicker` é recomendado quando a API de `work_windows` estiver plenamente usada e testada.

Fim do resumo.
