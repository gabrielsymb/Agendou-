# ðŸŒ³ Estrutura do Projeto

Esta Ã© a Ã¡rvore de diretÃ³rios do projeto `barber_agenda`.

> **Nota sobre a MonetizaÃ§Ã£o:** O escopo do projeto foi alterado. A ideia inicial de um sistema de licenÃ§a paga (`licenca.rs`) foi abandonada em favor de um modelo baseado em doaÃ§Ãµes (donations). A arquitetura primariamente offline torna um sistema de assinatura facilmente contornÃ¡vel, sendo o modelo de apoio voluntÃ¡rio mais sustentÃ¡vel e honesto para com os usuÃ¡rios.

> **Nota sobre a Arquitetura:** A abordagem de frontend foi alterada. O desenvolvimento com Flutter (`agendou_web`) foi descontinuado. O projeto agora utilizarÃ¡ **Svelte** para o frontend, mantendo o backend em **Rust** intacto. A aplicaÃ§Ã£o completa (backend + frontend) serÃ¡ hospedada na plataforma **Fly.io**.

```markdown
# ðŸŒ³ Estrutura do Projeto (atualizada)

Esta Ã© a Ã¡rvore de diretÃ³rios do projeto `Agendou!` (backend Rust + frontend Svelte).

> **Nota sobre a MonetizaÃ§Ã£o:** O sistema de licenÃ§a (`licenca.rs`) foi originalmente planejado, mas o projeto migrou para um modelo baseado em doaÃ§Ãµes; o cÃ³digo ainda mantÃ©m campos e tabelas relacionados Ã  validade de licenÃ§a.

> **Nota sobre a Arquitetura:** Frontend em Svelte (SvelteKit) e backend em Rust (Axum). A aplicaÃ§Ã£o pode rodar em modo CLI ou como servidor HTTP.
```

/
â”œâ”€â”€ beckend/
â”‚ â”œâ”€â”€ Cargo.toml
â”‚ â”œâ”€â”€ Cargo.lock
â”‚ â””â”€â”€ src/
â”‚ â”œâ”€â”€ db/
â”‚ â”‚ â”œâ”€â”€ mod.rs # Acesso SQLite: conexÃ£o, criaÃ§Ã£o de tabelas, CRUD, migraÃ§Ãµes leves (ex.: adiciona `duracao_min` em `servicos` se ausente)
â”‚ â”‚ â””â”€â”€ Banco.db # Arquivo de banco (padrÃ£o em src/bd/Banco.db em runtime; pode ser sobrescrito por APP_DB_PATH)
â”‚ â”œâ”€â”€ models/
â”‚ â”‚ â””â”€â”€ mod.rs # Structs: Cliente, Agendamento, Servico, UsuarioSistema
â”‚ â”œâ”€â”€ calc_preco.rs # RelatÃ³rios e cÃ¡lculos de lucro
â”‚ â”œâ”€â”€ licenca.rs # LÃ³gica de licenÃ§a/validaÃ§Ã£o (campo de validade mantido, monetizaÃ§Ã£o migrada para doaÃ§Ãµes)
â”‚ â”œâ”€â”€ menu.rs # Menu CLI (opera sobre as mesmas funÃ§Ãµes de persistÃªncia do backend)
â”‚ â”œâ”€â”€ servicos.rs # Handlers/funcionalidades de serviÃ§os (listar/criar/atualizar/excluir)
â”‚ â”œâ”€â”€ agendamentos.rs # Handlers HTTP para agendamentos + adaptador para payloads flexÃ­veis (timestamps string/numÃ©rico)
â”‚ â””â”€â”€ main.rs # Ponto de entrada; inicializa servidor/CLI e registra rotas (clientes, serviÃ§os, agendamentos)
â”œâ”€â”€ frontend/
â”‚ â”œâ”€â”€ package.json
â”‚ â”œâ”€â”€ svelte.config.js
â”‚ â”œâ”€â”€ tsconfig.json
â”‚ â””â”€â”€ src/
â”‚ â”œâ”€â”€ app.css
â”‚ â”œâ”€â”€ app.html
â”‚ â”œâ”€â”€ lib/
â”‚ â”‚ â”œâ”€â”€ components/ # Componentes Svelte reutilizÃ¡veis (cards, modais, toasts)
â”‚ â”‚ â””â”€â”€ toast.ts
â”‚ â””â”€â”€ routes/
â”‚ â”œâ”€â”€ +layout.svelte # Layout principal com navegaÃ§Ã£o
â”‚ â”œâ”€â”€ +page.svelte # Dashboard
â”‚ â”œâ”€â”€ clientes/
â”‚ â”‚ â”œâ”€â”€ +page.svelte
â”‚ â”‚ â””â”€â”€ +page.server.ts
â”‚ â””â”€â”€ servicos/
â”‚ â”œâ”€â”€ +page.svelte
â”‚ â””â”€â”€ +page.ts
â”‚ â””â”€â”€ agendamentos/
â”‚ â”œâ”€â”€ +page.svelte # Listagem e UI de agendamentos
â”‚ â””â”€â”€ +page.ts # Carrega agendamentos via /api/agendamentos (proxy)
â”‚ â””â”€â”€ api/
â”‚ â””â”€â”€ agendamentos/
â”‚ â”œâ”€â”€ +server.ts # Proxy GET/POST -> /agendamentos (encaminha para BACKEND via PRIVATE_API_BASE)
â”‚ â””â”€â”€ [id]/+server.ts # Proxy GET/PUT/DELETE -> /agendamentos/:id
â”‚ â””â”€â”€ clientes/ # proxies para clientes tambÃ©m implementados em server-side
â”‚ â”œâ”€â”€ README.md # InstruÃ§Ãµes de desenvolvimento e .env (explica PRIVATE_API_BASE para proxy)
â”‚ â”œâ”€â”€ .env.example # Exemplo de variÃ¡veis de ambiente (PRIVATE_API_BASE usado no server-side proxy)
â”‚ â””â”€â”€ .env # Arquivo de desenvolvimento local (NÃƒO versionado)
â”‚ â””â”€â”€ src/
â”‚ â””â”€â”€ routes/
â”‚ â””â”€â”€ api/ # Endpoints server-side (proxy) implementados para encaminhar ao backend
â”‚ â””â”€â”€ clientes/
â”‚ â”œâ”€â”€ +server.ts # GET, POST proxy para /clientes
â”‚ â””â”€â”€ [id]/+server.ts # GET, PUT, DELETE proxy para /clientes/:id
â”œâ”€â”€ doc/
â”‚ â”œâ”€â”€ PROJECT_STRUCTURE.MD # (este arquivo)
â”‚ â””â”€â”€ contexto_projeto.txt # Resumo tÃ©cnico do projeto (gerado)
â””â”€â”€ .gitignore

```

```
